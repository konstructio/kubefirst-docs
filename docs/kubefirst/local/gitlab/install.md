---
title: Install
---

# Local Platform Installation with GitLab

`kubefirst` is the name of our CLI that installs the platform of the same name to your local or cloud environment.

![Kubefirst local installation diagram](../../../img/kubefirst/local/kubefirst-cluster-create.png)

## Prerequisites

- [Install](../overview.md#how-to-install-kubefirst-cli) the kubefirst CLI.
- [Install](https://docs.docker.com/get-docker/) Docker Desktop.
- Create or use an existing [GitLab account](https://gitlab.com)

## Create your new local cluster

To create a new kubefirst cluster locally, run

```shell
kubefirst k3d create
```

Details about your execution will be logged to your `~/.k1/logs` directory. More information on `kubefirst k3d`, including optional flags, can be discovered by running `kubefirst k3d help`.

<!-- TODO: [2.0] the above warning is being spiked actively to see if we can remove it from the system as a part of the 2.0 release. confirm when releasing. -->
> **2 Hour Expiration Warning**
> The ngrok tunnel used for kubefirst local has a 2-hour expiration unless you [create a ngrok account](https://dashboard.ngrok.com/signup). This expiration will prevent you from using automated infrastructure as code through Terraform Atlantis, but the rest of the platform will continue to function beyond that ngrok evaluation period.

<!-- TODO: [2.0] will we be able to generate a GITLAB_TOKEN like we do on github or no? -->
<!-- TODO: [2.0] need a detail about exporting GITLAB_TOKEN -->

When Docker is provided 5 GB of memory and 5 CPUs, the local kubefirst platform will provision in about 6 minutes and deprovision in about 1 minute.

### Installed Applications

kubefirst provides a preconfigured set of platform tools powered by your new `gitops` repository. Operational knowledge of all applications is not necessary to begin using kubefirst but is useful to understand your cluster.

A newly created local kubefirst cluster contains:

- A private repo named `gitops` that contains all IaC and GitOps configurations that power the entire platform.
- [Argo CD](https://github.com/argoproj/argo-cd): GitOps Continuous Delivery.
- [Argo Workflows](https://argoproj.github.io/argo-workflows/): Kubernetes Native Workflow Engine.
- [Atlantis](https://www.runatlantis.io/): Terraform Workflow Automation.
- [ChartMuseum](https://github.com/helm/chartmuseum): Helm Chart Registry.
- [External Secrets Operator](https://github.com/external-secrets/external-secrets): Syncs Kubernetes secrets with Vault secrets.
- [GitHub Action Runner Controller](https://github.com/actions/actions-runner-controller):Self Hosted GitHub Action Runner.
- [HashiCorp Vault](https://github.com/hashicorp/vault): Secrets Management.
- [Metaphor](https://github.com/kubefirst/metaphor-frontend-template): A sample app to demonstrate CI/CD in on Kubernetes. Contains Devlopment, Staging, and Production environments.
- [Traefik](https://github.com/traefik/traefik): Default Ingress Controller for K3D Clusters.

### How to resolve HTTPS Certificate Warnings

To resolve the warning that the browser shows when you access one of your applications, run the command:

```shell
mkcert -install
```

This step will install the CA (Certificate Authority) of mkcert in your trusted store and will allow the browser to trust in certificates generated by your kubefirst local install.

> We use [mkcert](https://github.com/FiloSottile/mkcert) to generate local certificates and serve `https` with the Traefik Ingress Controller. During the installation, kubefirst generates these certificates and pushes them to Kubernetes as secrets to attach to Ingress resources. The browser does not recognize auto-assigned certificates as trusted ones and will generate security errors.

### ngrok & Atlantis Integrations

<!-- TODO: 2.0 - check the legitimacy of the above before releasing docs -->
[ngrok](https://ngrok.com/) is a tool that allows kubefirst to expose a local server to the internet via [ngrok Secure Tunnels](https://ngrok.com/docs/secure-tunnels/). kubefirst opens an ngrok Secure Tunnel tunnel during the installation to send events to Atlantis. When the installation finishes, the terminal window hangs at the handoff screen. If the handoff screen in your terminal is closed, the Kubefirst installation terminates and the Ngrok Secure Tunnel is closed.

During cluster provisioning, Terraform communicates with the host machine to create the desired resources. When Atlantis is installed via kubefirst, it will use ngrok to expose the Atlantis server to the internet via [webhooks](https://zapier.com/blog/what-are-webhooks/).

## After installation

After the ~5 minute installation, your browser will open a new browser tab at completion with the Console UI at [https://kubefirst.localdev.me](https://kubefirst.localdev.me) to provide you an easy way to navigate through the different services that were provisioned.

## Console UI Screen

<!-- TODO: [2.0] update with 2.0 console from local & GitLab -->
![kubefirst console screen](../../../img/kubefirst/local/console.png)

## Example of terminal output following cluster creation

![terminal handoff](../../../img/local/gitlab/handoff-screen.png)
