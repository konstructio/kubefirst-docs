---
sidebar_position: 3
---

# GitHub Repositories

When you install the local version of kubefirst, 2 new repositories will be added to your personal github account as shown here.

![repos list](/img/repos-list.png)

## Repository summary

```gitops```

The GitOps repo houses all of our IAC and all our GitOps configurations. All the infrastructure that you receive with Kubefirst was produced by some combination of Terraform and ArgoCD. You will add to this repository as your business needs require new infrastructure or new applications.

```metaphor frontend```

The metaphor frontend is an of example application used to showcase various features of the Kubefirst platform. The Metaphor app has CI/CD that deliver each app to a development, staging, and production namespace in your Kubernetes cluster. The metaphor service apps' secrets in vault are bound to the metaphor app through the use of external-secrets, a handy Kubernetes utility to keep Kubernetes secrets in sync with the vault source of truth. It also demonstrates how DNS entries are automatically created in Route 53 using external-dns. It also has auto-renewing, short-lived certificates generated by cert-manager and the Let's Encrypt cluster-issuer.

The available Metaphor application is **Metaphor Frontend** which is a slim version of our Metaphor Suite. Uses NextJS to provide both API and a Frontend application. The Metaphor applications are described in more details <a href="https://docs.kubefirst.io/preprod/explore/metaphor.html">here</a>.

## GitHub repository management

These GitHub repositories are being managed in Terraform.

As you need additional GitHub repositories, just add a new section of Terraform code to ```terraform/github/repos.tf```:

```json
module "your_repo_name" {
  source = "./modules/repository"
  visibility         = "private"
  repo_name          = "your-repo-name"
  archive_on_destroy = true
  auto_init          = false # set to false if importing an existing repository, set to true if brand new
}
```

GitHub's Terraform provider provides many more configuration options than just these settings. Check them out and add to your default settings once you're comfortable with the platform.

Take a look at the ```Resources``` section of the GitHub provider documentation .

That was just GitHub. Take a look at all the Terraform providers that are available; the list of technologies you can manage in Terraform is really impressive.

## Making Terraform changes

To make infrastructure and configuration changes with Terraform, simply open a merge request in the ```gitops``` repository. Your pull request will automatically provide plans, state locks, and applies, and even comment in the merge request itself. You'll have a simple, peer reviewable, auditable changelog of all infrastructure and configuration changes.

All this automation is possible because of Atlantis. Atlantis is a tool that runs in your Kubernetes cluster and via a webhook, listens for pull requests in your GitOps repository. When it sees a pull request, it will run ```terraform plan```, and post the plan as a comment in the ```pull request```. If the Terraform plan succeed, Atlantis will run terraform apply, and post the results as a comment in the pull request.

![atlantis plan](/img/atlantis-plan-apply-example.png)