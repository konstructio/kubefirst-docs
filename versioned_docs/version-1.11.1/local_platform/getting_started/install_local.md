---
sidebar_position: 2
---

# 1. Install Local Platform

## Prerequisites
- Have the <a href="/docs/getting-started/installation#1-install-the-kubefirst-cli">kubefirst CLI installed</a>
- Have docker installed (<a href="https://docs.docker.com/get-docker/">here's how</a>)
- Have created a <a href="https://github.com/">personal github account</a> (gitops and metaphor-frontend repositories will be created in your account and should not pre-exist)

:::caution

The ngrok tunnel used for kubefirst local has a 2-hour expiration unless you create an account with ngrok. This expiration will prevent you from using automated infrastructure as code through atlantis, but the rest of the platform will continue to function beyond that ngrok evaluation period. <a href="https://dashboard.ngrok.com/signup">Create an account with ngrok</a> to prevent this.

:::

## Create your new local cluster

To create a new Kubefirst cluster locally, run:

```
kubefirst local
```

If your run is not successful, errors and troubleshooting information will be stored in a local log file specified during the installation run.

This will be followed by the instructions prompt to populate the ```KUBEFIRST_GITHUB_AUTH_TOKEN``` env variable for your <a href="https://docs.kubefirst.io/preprod/explore/github-token.html">github token</a>. Press ```ENTER``` and follow the prompt to continue.

Please export a ```KUBEFIRST_GITHUB_AUTH_TOKEN``` if you need your ephemeral environment for more than 8 hours. The ephemeral GitHub tokens that we can create for you expire after 8 hours.

The installation process may take a few minutes. If you are successful you should see:

```
Cluster "kubefirst" is up and running!
```

### Installed applications

Kubefirst implicitly contains many applications to provide starting capabilities for new users. Operational knowledge of all applications is not necessary to begin using Kubefirst, but is useful to understand your cluster.

A newly created local Kubefirst cluster contains:

- A private repo named ```gitops```. The applications that you build and release on the kubefirst platform will also be registered here in the development, staging, and production folders.
- <a href="https://github.com/argoproj/argo-cd">Argo CD</a> - GitOps Continuous Delivery
- <a href="https://argoproj.github.io/argo-workflows/">Argo Workflows</a> - Application Continuous Integration
- <a href="https://www.runatlantis.io/">Atlantis</a> - Terraform Workflow Automation
- <a href="https://github.com/helm/chartmuseum">Chart Museum</a> - Helm Chart Registry
- <a href="https://github.com/external-secrets/kubernetes-external-secrets">External Secrets</a> - Syncs Kubernetes secrets with Vault secrets
- <a href="https://github.com/features/actions">GitHub Action Runner</a> - Self Hosted GitHub Action Runner
- <a href="https://github.com/kubefirst/metaphor-frontend-template">Metaphor</a> - A sample app to demonstrate CI/CD in on Kubernetes. Contains Development, Staging and Production environments.
- <a href="https://github.com/traefik/traefik">Traefik</a> - Default Ingress Controller for K3D Clusters
- <a href="https://github.com/hashicorp/vault">Vault</a> - Secrets Management

After the ~5 minutes installation, your browser will launch a new tab to the **Kubefirst Console** application, which will help you navigate your new suite of tools running in your local k3d cluster.

### How to resolve HTTPS certificate warnings

To resolve the warning that the browser shows when you access one of your applications, run the command:

```
mkcert -install
```

We use <a href="https://github.com/FiloSottile/mkcert">Mkcert</a> to generate local certificates and serve https with the Traefik Ingress Controller.

During installation, Kubefirst generates these certificates and pushes them to Kubernetes as secrets to attach to Ingress resources. The browser does not recognize auto-assigned certificates as trusted certificates and will generate security errors.

This step will install the CA (Certificate Authority) of MkCert in your trusted store and will allow the browser to trust in certificates generated by your Kubefirst local install.

### Atlantis and Ngrok integration

<a href="https://ngrok.com/">Ngrok</a> is a tool that allows Kubefirst to expose a local server to the internet via an <a href="https://ngrok.com/docs/secure-tunnels/">ngrok Secure Tunnel</a>. Kubefirst opens an ngrok Secure Tunnel tunnel during the installation to send events to Atlantis. When the installation finishes, the terminal window hangs at the handoff screen. If the handoff screen in your terminal is closed, the Kubefirst installation terminates and the Ngrok Secure Tunnel is closed.

During cluster provisioning, Terraform communicates with the host machine to create the desired resources. When Atlantis is installed via Kubefirst, it will use ngrok to expose the Atlantis server to the internet via <a href="https://zapier.com/blog/what-are-webhooks">webhook</a>.
